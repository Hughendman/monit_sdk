/*! Monit_SDK 2018-04-10 */
!function(a){"use strict";if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a());else{var b;if("undefined"==typeof window)throw new Error("wrong execution environment");b=window,b.M2=a()}}(function(){"use strict";window.console=window.console||function(){var a={};return a.log=a.warn=a.debug=a.info=a.error=a.time=a.dir=a.profile=a.clear=a.exception=a.trace=a.assert=function(){},a}();var a,b="",c={};!function(){a=!0;try{var b=location.protocol.toLowerCase();"http:"!=b&&"https:"!=b||(a=!1)}catch(a){}}();var d=document,e=window.navigator,f=window.screen,g=a?"":d.domain.toLowerCase(),h=e.userAgent.toLowerCase(),i=function(a){return function(b){return Object.prototype.toString.call(b)==="[object "+a+"]"}},j={get:function(a){var b=""+d.cookie,c=b.indexOf(a);if(void 0===a||""===a||-1===c)return"";var e=b.indexOf(";",c);return-1==e&&(e=b.length),unescape(b.substring(c+a.length+1,e))},set:function(a,b,c,e,f){var g=new Date;c=c||30,f=f||"/",g.setTime(g.getTime()+24*c*60*60*1e3);var h="; expires="+g.toGMTString(),i=a+"="+b+h+"; path="+f;e&&(i+="; domain="+e),d.cookie=i},remove:function(a){j.get(a)&&j.set(a,"",-1,"/")}},k={is:function(){var a="modernizr";try{return window.sessionStorage.setItem(a,a),window.sessionStorage.removeItem(a),!0}catch(a){return!1}},get:function(a){if(k.is())return window.sessionStorage.getItem(a);console.log("sessionStorage error: get "+a)},set:function(a,b){if(k.is())return window.sessionStorage.setItem(a,b);console.log("sessionStorage error: set name:"+a+",value:"+b)},remove:function(a){if(k.is())return window.sessionStorage.removeItem(a);console.log("sessionStorage error: remove "+a)}},l={trim:function(a){return a.replace(/^[\s\xa0\u3000]+|[\u3000\xa0\s]+$/g,"")},encodeObject2URIString:function(a){if("string"==typeof a)return a;var b=[];for(var c in a)a.hasOwnProperty(c)&&"function"!=typeof a[c]&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},stringify:function(a){var b=typeof a,c=l.stringify;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),String(a);if("object"==typeof JSON&&JSON.stringify)return JSON.stringify(a);var d,e=[],f=a&&a.constructor===Array;for(var g in a)a.hasOwnProperty(g)&&(d=a[g],b=typeof d,"string"===b?d='"'+d+'"':"object"===b&&null!==d&&(d=c(d)),e.push((f?"":'"'+g+'":')+String(d)));return(f?"[":"{")+String(e)+(f?"]":"}")},parseJSON:function(a){var b=/^[\],:{}\s]*$/,c=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,d=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,e=/(?:^|:|,)(?:\s*\[)+/g;return"object"==typeof a?a:"string"==typeof a&&a?(a=a.replace(/(^\s+)|(\s+$)/g,""),b.test(a.replace(c,"@").replace(d,"]").replace(e,""))?window.JSON&&window.JSON.parse?window.JSON.parse(a):new Function("return "+a)():a):null},bind:function(a,b){return Function.prototype.bind?a.bind(b):function(){a.apply(b,arguments)}},hasSearch:function(a,b){var c="";return c=/\?/.test(a)?"&":"?",a+c+b},forIn:function(a,b){if(l.isObject(a))for(var c in a)a.hasOwnProperty(c)&&b.call(null,c,a[c])},each:function(){return[].forEach?function(a){[].forEach.apply(a,[].slice.call(arguments,1))}:function(a,b){for(var c=0,d=a.length;c<d;c++)b.call(arguments[2],a[c],c,a)}}(),init:function(){l.each(["Object","String","Function","Array"],function(a){l["is"+a]=i(a)})},isPureObject:function(a){return!(!l.isObject(a)||a.constructor!==Object)}};l.init();var m={init:function(){var a={title:d.title||"",url:m.getUrl(),guid:m.getGuid(),referrer:m.getReferrer(),ua:h,browser:m.getBrowser(),viewport:m.getViewportSize(),lang:m.getLang(),appenv:m.getAppenv(),is_admin:m.isAdmin};l.forIn(a,function(a,b){c[a]=b})},isAdmin:j.get("is_admin")||"",getLang:function(){var a=j.get("felangague");return a||(a=e.language||e.systemLanguage),a},getBrowser:function(){var a={"360se-ua":"360se",TT:"tencenttraveler",Maxthon:"maxthon",GreenBrowser:"greenbrowser",Sogou:"se 1.x / se 2.x",TheWorld:"theworld"};for(var b in a)if(h.indexOf(a[b])>-1)return b;var c=!1;try{+external.twGetVersion(external.twGetSecurityID(window)).replace(/\./g,"")>1013&&(c=!0)}catch(a){}if(c)return"360se-noua";var d=h.match(/(msie|chrome|safari|firefox|opera|trident)/);return d=d?d[0]:"","msie"==d?d=h.match(/msie[^;]+/)+"":"trident"==d&&h.replace(/trident\/[0-9].*rv[ :]([0-9.]+)/gi,function(a,b){d="msie "+b}),d},getAppenv:function(){var a=j.get("appenv")||"",b=k.get("appenv");return a||(b||(a="test"),k.set("appenv",a)),a},getUrl:function(){var a="";try{a=location.href}catch(b){a=d.createElement("a"),a.href="",a=a.href}return a},getReferrer:function(){var a="__referrer",b=k.get(a),c=d.referrer;return b||(b=c||"",k.set(a,b)),b},getViewportSize:function(){try{var a=top.document.documentElement,b=top.document.body&&top.document.clientWidth&&top.document.clientHeight}catch(c){var a=a.documentElement,b=(c=a.body)&&a.clientWidth&&a.clientHeight}var c=[];return a&&a.clientWidth&&a.clientHeight&&("CSS1Compat"===a.compatMode||!b)?c=[a.clientWidth,a.clientHeight]:b&&(c=[a.clientWidth,a.clientHeight]),l.stringify({w:c[0],h:c[1]})},getGuid:function(){function b(a){var b=0,c=0,d=a.length-1;for(d;d>=0;d--){var e=parseInt(a.charCodeAt(d),10);b=(b<<6&268435455)+e+(e<<14),0!=(c=266338304&b)&&(b^=c>>21)}return b}function c(){for(var a=[e.appName,e.version,e.language||e.browserLanguage,e.platform,e.userAgent,f.width,"x",f.height,f.colorDepth,d.referrer].join(""),c=a.length,g=window.history.length;g;)a+=g--^c++;return 2147483647*(Math.round(2147483647*Math.random())^b(a))}var h="__guid",i=j.get(h);if(!i){i=[b(a?"":d.domain),c(),+new Date+Math.random()+Math.random()].join(".");var k={expires:30,domain:"localhost",path:"/"},l=["bw.cn","brandwisdom.cn","jointwisdom.cn"];if(l.length)for(var m=0;m<l.length;m++){var n=l[m],o="."+n;if(g.indexOf(o)>0&&g.lastIndexOf(o)==g.length-o.length||g==n){k.domain=o;break}}j.set(h,i,k.expires,k.domain,k.path)}return i}},n={clickInit:function(a){n._event(document,"click",function(b){var d=b.target||b.srcElement,e={m_type:1,attributes:n.getAttributeList(b,d,!0),parent_attributes:n.getAttributeList(b,n.parentNode(d,"div"),!1)};l.forIn(e,function(a,b){c[a]=b}),a()},!0),window.addEventListener("hashchange",function(a){k.set("__referrer",a.oldURL),m.init(),c.m_type=3,c.cid=0,c.attributes=n.getAttributeList(!1,!0),c.parent_attributes=n.getAttributeList(n.parentNode(!1,"div"),!1),o.setConifg(),o.addCustom({}),o.postMonit()},!1)},parentNode:function(a,b,c){if(c=c||50,b=b.toUpperCase(),"BODY"===a.tagName||"HTML"===a.tagName)return a;for(;a&&c-- >0;){if(a.tagName===b&&""!==a.className)return a;a=a.parentNode}return a},getAttributeList:function(a,b,d){var e={},f=b.attributes||[],g="";return b.tagName?(e.pageX=a.pageX,e.pageY=a.pageY,e.sw=window.screen.width,e.sh=window.screen.height,e.tagName=b.tagName,e.className=b.className,e.tagText=n.getText(b),l.each(f,function(a,b,c){"cid"===a.name&&d?g=a.value:"id"===a.name||"value"===a.name?e[a.name]=a.value:a.name.indexOf("ng-")<0&&a.name.indexOf("m2-")>-1&&(e[a.name]=encodeURIComponent(a.value))}),c.cid=g,l.stringify(e)):""},getText:function(a){var b="";return"input"==a.tagName.toLowerCase()?b=a.value||"":"body"!=a.tagName.toLowerCase()&&"html"!=a.tagName.toLowerCase()?a.childNodes.length<=1&&(b=a.innerText||a.textContent||a.value||a.title||""):"a"==a.tagName.toLowerCase()&&(a.childNodes.length<=1&&(b=a.innerText||a.textContent||a.value||a.title||""),b=b||a.src),b.replace(/^\s*|\s*$/g,"").substr(0,100)},_event:function(){function a(a,c,d){return function(e){if(e=e||b(window.event)){var f,g,h=!0;return/^\s\bfunction\b/.test(d)&&(f=d(e)),g=c.call(a,e),!1!==f&&!1!==g||(h=!1),h}}}function b(a){return a&&(a.preventDefault=b.preventDefault,a.stopPropagation=b.stopPropagation),a}var c=function(b,c,d,e){if(!b)return void console.error("No valid element provided to register_event");if(b.addEventListener)b.addEventListener(c,d,!!e);else{var f="on"+c,g=b[f];b[f]=a(b,d,g)}};return b.preventDefault=function(){this.returnValue=!1},b.stopPropagation=function(){this.cancelBubble=!0},c}()},o={postMonit:function(){var a=new Image;if(!c.pid&&!b)throw new TypeError("pid or M2_SERVER_URL is not null....");var d="&"+l.encodeObject2URIString(c);a.src=b+"?t="+(new Date).getTime()+d},setConifg:function(){var a=o.setTags(),d=a.user,e=a.tags;b=d.M2_SERVER_URL||"",c.pid=d.pid||"",c.uid=d.uid||"",c.hid=d.hid||"",c.custom_tag=e||""},setTags:function(){var a=window.M2_TAGS||[],b={},c={};return l.each(a,function(a,d,e){if(l.isArray(a))switch(a.length){case 2:b[a[0]]=a[1]||"";break;case 3:c[a[1]]=a[2]||""}}),{user:b,tags:l.stringify(c)}},addCustom:function(a){if(a&&l.isObject(a)){var b=l.parseJSON(c.custom_tag)||{};l.forIn(a,function(a,c){b[a]=c}),c.custom_tag=l.stringify(b)}}},p=function(){};p.prototype.init=function(){n.clickInit(function(){m.init(),o.setConifg(),o.postMonit()})},p.prototype.setMoint=function(a,b,d,e){var f=!!a&&(a.target||a.srcElement);m.init(),c.m_type=e||2,c.cid=d,c.attributes=n.getAttributeList(f,!0),c.parent_attributes=n.getAttributeList(n.parentNode(f,"div"),!1),o.setConifg(),o.addCustom(b),o.postMonit()},p.prototype._getQuest=function(a,b,d){var e=!!a&&(a.target||a.srcElement);m.init(),c.m_type=2,c.cid=d||"",c.attributes=n.getAttributeList(e,!0),c.parent_attributes=n.getAttributeList(n.parentNode(e,"div"),!1),o.setConifg(),o.addCustom(b),o.postMonit()};var q=new p;q.init(),q.setMoint(null,{},0,3);var r=function(a){return a};return l.forIn({getQuest:"_getQuest",setMoint:"setMoint"},function(a,b){r[a]=function(){return q[b].apply(null,arguments)}}),r.version="0.9.0",r});